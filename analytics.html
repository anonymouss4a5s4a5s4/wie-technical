<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="admin-dashboard-page">
    <nav class="navbar navbar-custom">
        <div class="container-fluid">
            <button class="btn btn-light btn-sm" onclick="location.href='admin-dashboard.html'">← Back</button>
            <span class="navbar-brand text-white">Analytics Dashboard</span>
            <button class="btn btn-light btn-sm" onclick="location.href='index.html'">Logout</button>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="row mb-4">
            <div class="col-12">
                <h2 class="text-white">System Analytics & Insights</h2>
                <p class="text-white-50">Comprehensive overview of system performance</p>
            </div>
        </div>

        <!-- Key Metrics -->
        <div class="row g-4 mb-4">
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body text-center">
                        <i class="bi bi-people-fill display-4 text-primary"></i>
                        <h3 class="mt-3">523</h3>
                        <p class="text-muted mb-0">Total Workers</p>
                        <small class="text-success">↑ 12% this month</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body text-center">
                        <i class="bi bi-patch-check-fill display-4 text-success"></i>
                        <h3 class="mt-3">48</h3>
                        <p class="text-muted mb-0">Active Certificates</p>
                        <small class="text-success">↑ 8% this month</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body text-center">
                        <i class="bi bi-exclamation-triangle-fill display-4 text-warning"></i>
                        <h3 class="mt-3">127</h3>
                        <p class="text-muted mb-0">Total Complaints</p>
                        <small class="text-danger">↑ 5% this month</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body text-center">
                        <i class="bi bi-qr-code display-4 text-info"></i>
                        <h3 class="mt-3">1,247</h3>
                        <p class="text-muted mb-0">QR Verifications</p>
                        <small class="text-success">↑ 23% this month</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="row g-4 mb-4">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Complaint Trends (Last 6 Months)</h5>
                        <div class="chart-container">
                            <canvas id="complaintChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Complaints by Category</h5>
                        <div class="chart-container">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row g-4 mb-4">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Top Rated Farmers</h5>
                        <div class="list-group">
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                Fatima Khelifi
                                <span class="badge bg-success">4.9 ★</span>
                            </div>
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                Ahmed Ben Salem
                                <span class="badge bg-success">4.8 ★</span>
                            </div>
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                Mohamed Trabelsi
                                <span class="badge bg-success">4.7 ★</span>
                            </div>
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                Leila Mansour
                                <span class="badge bg-success">4.6 ★</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Recent Activity</h5>
                        <div class="list-group">
                            <div class="list-group-item">
                                <small class="text-muted">2 hours ago</small>
                                <p class="mb-0">New complaint submitted - CPL-127</p>
                            </div>
                            <div class="list-group-item">
                                <small class="text-muted">5 hours ago</small>
                                <p class="mb-0">Certificate issued - CERT-2025-048</p>
                            </div>
                            <div class="list-group-item">
                                <small class="text-muted">1 day ago</small>
                                <p class="mb-0">QR verification - 47 scans</p>
                            </div>
                            <div class="list-group-item">
                                <small class="text-muted">2 days ago</small>
                                <p class="mb-0">New worker registered</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resolution Statistics -->
        <div class="row g-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Complaint Resolution Statistics</h5>
                        <div class="row text-center mt-4">
                            <div class="col-md-3">
                                <h4 class="text-danger">12</h4>
                                <p class="text-muted">Pending</p>
                                <div class="progress">
                                    <div class="progress-bar bg-danger" style="width: 9%"></div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-warning">25</h4>
                                <p class="text-muted">In Review</p>
                                <div class="progress">
                                    <div class="progress-bar bg-warning" style="width: 20%"></div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-success">90</h4>
                                <p class="text-muted">Resolved</p>
                                <div class="progress">
                                    <div class="progress-bar bg-success" style="width: 71%"></div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-primary">127</h4>
                                <p class="text-muted">Total</p>
                                <div class="progress">
                                    <div class="progress-bar bg-primary" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Complaint Trends Chart
        const complaintCtx = document.getElementById('complaintChart');
        if (complaintCtx) {
            new Chart(complaintCtx, {
                type: 'line',
                data: {
                    labels: ['Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'Jan'],
                    datasets: [{
                        label: 'Complaints',
                        data: [15, 22, 18, 25, 20, 27],
                        borderColor: '#f56565',
                        backgroundColor: 'rgba(245, 101, 101, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Category Chart
        const categoryCtx = document.getElementById('categoryChart');
        if (categoryCtx) {
            new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Wages', 'Safety', 'Transport', 'Harassment', 'Other'],
                    datasets: [{
                        data: [35, 25, 20, 15, 5],
                        backgroundColor: [
                            '#5a67d8',
                            '#48bb78',
                            '#ed8936',
                            '#f56565',
                            '#9f7aea'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }
    </script>
</body>
</html>